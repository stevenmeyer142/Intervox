package com.brazedblue.intervox.dicom;import com.brazedblue.intervox.util.*;import java.io.*;import java.text.StringCharacterIterator;class DicomDictionaryReader /* implements anInterface */ {  private BufferedReader fInputReader;  private String fGroup;  private String fElement;  private String fValueRep;  private String fName;  private boolean fValid = true;  public DicomDictionaryReader(Reader reader) {    fInputReader = new BufferedReader(reader);  }  public DicomDictionaryEntry GetNextEntry() throws IOException {    DicomDictionaryEntry result = null;    String nextLine = fInputReader.readLine();    while (nextLine != null) {      int startPos = nextLine.indexOf('{');      fValid = startPos >= 0;      if (fValid) {        StringCharacterIterator iter = new StringCharacterIterator(nextLine, startPos);        ReadGroup(iter, nextLine);        ReadElement(iter, nextLine);        ReadValueRep(iter, nextLine);        ReadName(iter, nextLine);      }      if (!fValid) //	line was no good      {        nextLine = fInputReader.readLine();      } else {        result = new DicomDictionaryEntry(fGroup, fElement, fValueRep, fName);        break;      }    }    return result;  }  void ReadGroup(StringCharacterIterator iter, String line) {    if (fValid) {      fGroup = NeuroSynchUtil.GetDelimetedString(iter, line, 'x', ',');      fValid = (fGroup != null) && NeuroSynchUtil.IsIntegerString(fGroup, 16);    }  }  void ReadElement(StringCharacterIterator iter, String line) {    if (fValid) {      fElement = NeuroSynchUtil.GetDelimetedString(iter, line, 'x', ',');      fValid = (fElement != null) && NeuroSynchUtil.IsIntegerString(fElement, 16);    }  }  void ReadValueRep(StringCharacterIterator iter, String line) {    if (fValid) {      fValueRep = NeuroSynchUtil.GetDelimetedString(iter, line, '\'', '\'');      fValid = fValueRep != null;    }  }  void ReadName(StringCharacterIterator iter, String line) {    if (fValid) {      fName = NeuroSynchUtil.GetDelimetedString(iter, line, '"', '"');      fValid = fName != null;    }  }}