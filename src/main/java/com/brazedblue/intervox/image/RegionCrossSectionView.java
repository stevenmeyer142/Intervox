package com.brazedblue.intervox.image;import java.awt.*;import javax.swing.JPanel;public class RegionCrossSectionView extends JPanel {	Image					fImage;	RegionedImageSlicesSet	fSlicesSet;	Point					fImageTopLeft = new Point(0, 0);	int 					fCurrentSlice = -1;      public RegionCrossSectionView(RegionedImageSlicesSet slicesSet) 	{		fSlicesSet = slicesSet;		CreateImage();  	}		public void FlushImage()	{		if (fImage != null)		{			fImage.flush();		}	}		public int GetClickToSlice(int x, int y)	{		int result = -1;		if (x >= fImageTopLeft.x && x < fImageTopLeft.x + fImage.getWidth(this) && 					y >= fImageTopLeft.y && y < fImageTopLeft.y + fImage.getWidth(this))		{			result = y - fImageTopLeft.y;		}				return result;	}		public void SetCurrentSlice(int slice)	{		if (fCurrentSlice != slice)		{			fCurrentSlice = slice;			repaint();		}	}		private void CreateImage()	{		fImage = createImage(fSlicesSet.GetCrossSectionImageProducer());				setPreferredSize(new Dimension(fImageTopLeft.x + fImage.getWidth(this), fImageTopLeft.y + fImage.getHeight(this)));	}	public void paintComponent(Graphics g) 	{		if (fImage != null)		{			g.drawImage(fImage, fImageTopLeft.x, fImageTopLeft.y, this);						if (fCurrentSlice != -1)			{				g.setXORMode(Color.black);								g.drawLine(fImageTopLeft.x, fImageTopLeft.y + fCurrentSlice, fImageTopLeft.x + fImage.getWidth(this),									fImageTopLeft.y + fCurrentSlice);													g.setPaintMode();			}		}	}  }